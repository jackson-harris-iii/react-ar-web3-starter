(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4779],{25483:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/ar-page",function(){return n(55495)}])},71062:function(e,t,n){"use strict";var a=n(85893),r=n(67294),l=n(6158),s=n.n(l);n(77329);var o=n(7754);let i=e=>{let{playerPosition:t,nearbyWayspots:n,loadingNearbyWayspots:l}=e,[i,c]=(0,r.useState)(null),[u,d]=(0,r.useState)(null),m=(0,r.useRef)(null);return(0,r.useEffect)(()=>{let e=m.current;if(null===e)return;let n=(null==t?void 0:t.lat)?[null==t?void 0:t.lng,null==t?void 0:t.lat]:[-74.5,40];console.log("map center",n);let a=new(s()).Map({container:e,accessToken:"pk.eyJ1IjoiamFja3Nvbi1uaWFudGljIiwiYSI6ImNsZTdneXVreTA1aW0zdm82bXMyeGp6Z24ifQ.IWg4qKLFC0s-OHvF7ojaAw",style:"mapbox://styles/jackson-niantic/cle7h092b001t01qlrj3ztjos",center:n,zoom:13}),r=new(s()).GeolocateControl({fitBoundsOptions:{zoom:13},positionOptions:{enableHighAccuracy:!0},trackUserLocation:!0});return a.addControl(r),c(a),d(r),()=>{a.remove()}},[t]),(0,r.useEffect)(()=>{if(Array.isArray(n)&&i&&n.length>0){console.log("nearbyWayspots",n);let e={type:"FeatureCollection",features:n.map(e=>({type:"Feature",geometry:{type:"Point",coordinates:{lat:e.lat,lng:e.lng}}}))};console.log("heres the map",i),console.log("heres the geojson",e),i.on("load",()=>{e.features.forEach(e=>{let t=document.createElement("div");t.className="location-marker",t.style.backgroundImage="url(/location-marker.png)",t.style.width="30px",t.style.height="42px",new(s()).Marker(t).setLngLat(e.geometry.coordinates).addTo(i)}),u&&u.trigger()})}},[n,i]),(0,a.jsxs)(a.Fragment,{children:[(null==l?void 0:l.loading)?(0,a.jsx)("p",{children:"still getting the lay of the land..."}):null,(0,a.jsx)(o.M,{children:(0,a.jsx)("div",{ref:m,style:{width:"100vw",height:"75vh"}})})]})};t.Z=i},55495:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return j}});var a=n(85893),r=n(29222),l=n(35059),s=n(67294),o=(0,l.G)((e,t)=>{let{icon:n,children:l,isRound:o,"aria-label":i,...c}=e,u=n||l,d=(0,s.isValidElement)(u)?(0,s.cloneElement)(u,{"aria-hidden":!0,focusable:!1}):null;return(0,a.jsx)(r.z,{padding:"0",borderRadius:o?"full":void 0,ref:t,"aria-label":i,...c,children:d})});o.displayName="IconButton";var i=n(36979),c=n(31708),u=n(776),d=n(7754),m=n(23100),f=n(41664),p=n.n(f),h=n(56877),g=function(e){let{viewBox:t="0 0 24 24",d:n,displayName:r,defaultProps:o={}}=e,i=s.Children.toArray(e.path),c=(0,l.G)((e,r)=>(0,a.jsx)(h.J,{ref:r,viewBox:t,...o,...e,children:i.length?i:(0,a.jsx)("path",{fill:"currentColor",d:n})}));return c.displayName=r,c}({d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z",displayName:"ArrowBackIcon"}),y=n(45155),v=n(71062);let x=()=>{let[e,t]=(0,s.useState)(0),[n,r]=(0,s.useState)(15),[l,f]=(0,s.useState)(!1),[x,j]=(0,s.useState)(!1),[w,b]=(0,s.useState)(null),[_,E]=(0,s.useState)([]),[S,k]=(0,s.useState)({lnwPayload:{loading:!0}}),N=e=>{let t=new Set([..._,...e]);console.log("wayspotset",t);let n=Array.from(t);E(n)};return(0,s.useEffect)(()=>(window.XRIFrame.registerXRIFrame("my-iframe"),()=>{window.XRIFrame.deregisterXRIFrame()}),[]),(0,s.useEffect)(()=>{let e=e=>{let n=Math.min(100*e.detail.coinPoints,4500);console.log("react coinPoints",e.detail.coinPoints),t(n)},n=()=>{console.log("GAME STARTED!"),f(!0)};return window.addEventListener("points",e),window.addEventListener("gameStart",n),window.addEventListener("message",e=>{if("https://jackson-default-spotxgames.dev.8thwall.app"==e.origin){switch(e.data.name){case"playerPosition":b({...e.data});break;case"nearbyWayspots":N(e.data.wayspots);case"loadingNearbyWayspots":k({...e.data})}console.log(e),console.log(e.data);return}}),()=>{window.removeEventListener("points",e),window.removeEventListener("gameStart",n)}},[]),(0,s.useEffect)(()=>{console.log("tracking the game");let e=async e=>{alert("game over!"),j(!0)},t=null;return l&&n>0?t=setInterval(()=>{r(e=>e-1)},1e3):l&&n<1&&(e(),clearInterval(t)),()=>clearInterval(t)},[l,n]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(p(),{href:"/",children:(0,a.jsx)(o,{size:"md",icon:(0,a.jsx)(g,{}),children:"<--"})}),(0,a.jsxs)(i.W,{fluid:!0,mt:8,children:[(0,a.jsx)(c.r,{fluid:!0,justifyItems:"center",children:(0,a.jsxs)(u.P,{children:["Time Remaining: ",n,(0,a.jsx)("br",{}),"Points: ",e]})}),(0,a.jsxs)(d.M,{children:[(0,a.jsx)(m.xu,{dangerouslySetInnerHTML:{__html:'<iframe\n            id="my-iframe"\n            style="border: 0; width: 75vh; height: 75vh"\n            allow="camera;gyroscope;accelerometer;magnetometer;xr-spatial-tracking;microphone;geolocation;"\n            src="https://jackson-default-spotxgames.dev.8thwall.app/sx-axion-sprint-1/">\n            </iframe>'}}),(0,a.jsx)(h.J,{as:y.fp2})]}),(0,a.jsx)(v.Z,{playerPosition:w,loadingNearbyWayspots:null==S?void 0:S.lnwPayload,nearbyWayspots:_})]})]})};var j=x},77329:function(){},29222:function(e,t,n){"use strict";n.d(t,{z:function(){return g}});var a=n(67294),[r,l]=(0,n(55227).k)({strict:!1,name:"ButtonGroupContext"}),s=n(79513),o=n(25432),i=n(85893);function c(e){let{children:t,className:n,...r}=e,l=(0,a.isValidElement)(t)?(0,a.cloneElement)(t,{"aria-hidden":!0,focusable:!1}):t,c=(0,o.cx)("chakra-button__icon",n);return(0,i.jsx)(s.m.span,{display:"inline-flex",alignSelf:"center",flexShrink:0,...r,className:c,children:l})}c.displayName="ButtonIcon";var u=n(295);function d(e){let{label:t,placement:n,spacing:r="0.5rem",children:l=(0,i.jsx)(u.$,{color:"currentColor",width:"1em",height:"1em"}),className:c,__css:d,...m}=e,f=(0,o.cx)("chakra-button__spinner",c),p="start"===n?"marginEnd":"marginStart",h=(0,a.useMemo)(()=>({display:"flex",alignItems:"center",position:t?"relative":"absolute",[p]:t?r:0,fontSize:"1em",lineHeight:"normal",...d}),[d,t,p,r]);return(0,i.jsx)(s.m.div,{className:f,...m,__css:h,children:l})}d.displayName="ButtonSpinner";var m=n(81103),f=n(35059),p=n(91639),h=n(33179),g=(0,f.G)((e,t)=>{let n=l(),r=(0,p.mq)("Button",{...n,...e}),{isDisabled:c=null==n?void 0:n.isDisabled,isLoading:u,isActive:f,children:g,leftIcon:v,rightIcon:x,loadingText:j,iconSpacing:w="0.5rem",type:b,spinner:_,spinnerPlacement:E="start",className:S,as:k,...N}=(0,h.Lr)(e),I=(0,a.useMemo)(()=>{let e={...null==r?void 0:r._focus,zIndex:1};return{display:"inline-flex",appearance:"none",alignItems:"center",justifyContent:"center",userSelect:"none",position:"relative",whiteSpace:"nowrap",verticalAlign:"middle",outline:"none",...r,...!!n&&{_focus:e}}},[r,n]),{ref:C,type:P}=function(e){let[t,n]=(0,a.useState)(!e),r=(0,a.useCallback)(e=>{e&&n("BUTTON"===e.tagName)},[]);return{ref:r,type:t?"button":void 0}}(k),F={rightIcon:x,leftIcon:v,iconSpacing:w,children:g};return(0,i.jsxs)(s.m.button,{ref:(0,m.qq)(t,C),as:k,type:null!=b?b:P,"data-active":(0,o.PB)(f),"data-loading":(0,o.PB)(u),__css:I,className:(0,o.cx)("chakra-button",S),...N,disabled:c||u,children:[u&&"start"===E&&(0,i.jsx)(d,{className:"chakra-button__spinner--start",label:j,placement:"start",spacing:w,children:_}),u?j||(0,i.jsx)(s.m.span,{opacity:0,children:(0,i.jsx)(y,{...F})}):(0,i.jsx)(y,{...F}),u&&"end"===E&&(0,i.jsx)(d,{className:"chakra-button__spinner--end",label:j,placement:"end",spacing:w,children:_})]})});function y(e){let{leftIcon:t,rightIcon:n,children:a,iconSpacing:r}=e;return(0,i.jsxs)(i.Fragment,{children:[t&&(0,i.jsx)(c,{marginEnd:r,children:t}),a,n&&(0,i.jsx)(c,{marginStart:r,children:n})]})}g.displayName="Button"},7754:function(e,t,n){"use strict";n.d(t,{M:function(){return s}});var a=n(79513),r=n(35059),l=n(85893),s=(0,a.m)("div",{baseStyle:{display:"flex",alignItems:"center",justifyContent:"center"}});s.displayName="Center";var o={horizontal:{insetStart:"50%",transform:"translateX(-50%)"},vertical:{top:"50%",transform:"translateY(-50%)"},both:{insetStart:"50%",top:"50%",transform:"translate(-50%, -50%)"}};(0,r.G)(function(e,t){let{axis:n="both",...r}=e;return(0,l.jsx)(a.m.div,{ref:t,__css:o[n],...r,position:"absolute"})})},81103:function(e,t,n){"use strict";n.d(t,{lq:function(){return r},qq:function(){return l}});var a=n(67294);function r(...e){return t=>{e.forEach(e=>{!function(e,t){if(null!=e){if("function"==typeof e){e(t);return}try{e.current=t}catch(n){throw Error(`Cannot assign value '${t}' to ref '${e}'`)}}}(e,t)})}}function l(...e){return(0,a.useMemo)(()=>r(...e),e)}}},function(e){e.O(0,[6158,2634,7045,5307,9774,2888,179],function(){return e(e.s=25483)}),_N_E=e.O()}]);