(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5405],{45728:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return t(85514)}])},67510:function(e,n,t){"use strict";t.d(n,{Z:function(){return k}});var s=t(85893),a=t(7335),r=t(23100),l=t(204),i=t(54641),o=t(776),c=t(88911),d=t(7306),u=t(41664),h=t.n(u),x=t(50555),p=t(38391),m=t(56877),j=t(45155);let f=()=>{let e=[{href:"/",name:"Home"},{href:"/ar-page",name:"AR Page"},{href:"/account-info",name:"Account Info"}],{isOpen:n,onOpen:t,onClose:u}=(0,a.q)(),{address:f,isConnecting:g,isDisconnected:y}=(0,p.mA)();return(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)(r.xu,{px:3,py:2,boxShadow:"xl",children:[(0,s.jsxs)(l.k,{h:16,alignItems:"center",justifyContent:"space-between",children:[(0,s.jsx)(m.J,{as:j.fp2,sx:{fontSize:"3em"}}),(0,s.jsx)(i.U,{spacing:8,alignItems:"center",children:(0,s.jsx)(i.U,{as:"nav",spacing:4,display:{base:"none",md:"flex"},children:e.map((e,n)=>(0,s.jsx)(h(),{href:e.href,children:(0,s.jsx)(o.P,{children:(0,s.jsx)(c.x,{as:"i",children:e.name})})},n))})}),(0,s.jsx)(l.k,{alignItems:"center",children:(0,s.jsx)(x.tn,{})})]}),n?(0,s.jsx)(r.xu,{pb:4,display:{md:"none"},children:(0,s.jsx)(d.K,{as:"nav",spacing:4,children:e.map((e,n)=>(0,s.jsx)(h(),{href:e.href,children:(0,s.jsx)(o.P,{children:(0,s.jsx)(c.x,{as:"i",children:e.name})})},n))})}):null]})})};var g=t(39828),y=t(67294),v=t(26677),w=t(8713);let b=e=>{let{children:n}=e,{address:t,isConnecting:a,isDisconnected:l}=(0,p.mA)(),[i,o]=(0,y.useState)(null);if((0,y.useEffect)(()=>{},[i]),null!==i){let[e,n,s]=(0,v.ky)((0,g.JU)((0,g.ad)(w.H),"users",t),{snapshotListenOptions:{includeMetadataChanges:!0}})}return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(r.xu,{m:3,children:n}),(0,s.jsx)(f,{})]})};var k=b},71062:function(e,n,t){"use strict";var s=t(85893),a=t(67294),r=t(6158),l=t.n(r);t(77329);var i=t(7754);let o=e=>{let{playerPosition:n,nearbyWayspots:t,loadingNearbyWayspots:r}=e,[o,c]=(0,a.useState)(null),[d,u]=(0,a.useState)(null),h=(0,a.useRef)(null);return(0,a.useEffect)(()=>{let e=h.current;if(null===e)return;let t=(null==n?void 0:n.lat)?[null==n?void 0:n.lng,null==n?void 0:n.lat]:[-74.5,40];console.log("map center",t);let s=new(l()).Map({container:e,accessToken:"pk.eyJ1IjoiamFja3Nvbi1uaWFudGljIiwiYSI6ImNsZTdneXVreTA1aW0zdm82bXMyeGp6Z24ifQ.IWg4qKLFC0s-OHvF7ojaAw",style:"mapbox://styles/jackson-niantic/cle7h092b001t01qlrj3ztjos",center:t,zoom:13}),a=new(l()).GeolocateControl({fitBoundsOptions:{zoom:13},positionOptions:{enableHighAccuracy:!0},trackUserLocation:!0});return s.addControl(a),c(s),u(a),()=>{s.remove()}},[n]),(0,a.useEffect)(()=>{if(Array.isArray(t)&&o&&t.length>0){console.log("nearbyWayspots",t);let e={type:"FeatureCollection",features:t.map(e=>({type:"Feature",geometry:{type:"Point",coordinates:{lat:e.lat,lng:e.lng}}}))};console.log("heres the map",o),console.log("heres the geojson",e),o.on("load",()=>{e.features.forEach(e=>{let n=document.createElement("div");n.className="location-marker",n.style.backgroundImage="url(/location-marker.png)",n.style.width="30px",n.style.height="42px",new(l()).Marker(n).setLngLat(e.geometry.coordinates).addTo(o)}),d&&d.trigger()})}},[t,o]),(0,s.jsxs)(s.Fragment,{children:[(null==r?void 0:r.loading)?(0,s.jsx)("p",{children:"still getting the lay of the land..."}):null,(0,s.jsx)(i.M,{children:(0,s.jsx)("div",{ref:h,style:{width:"100vw",height:"75vh"}})})]})};n.Z=o},85514:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return F}});var s=t(85893),a=t(67510),r=t(7335),l=t(57350),i=t(7754),o=t(23100),c=t(204),d=t(31708),u=t(776),h=t(29222),x=t(92752),p=t(31963),m=t(62925),j=t(67294),f=t(56877),g=t(45155),y=t(80471),v=t(63750),w=t(5434),b=t(71062),k=t(50555),I=t(38391),S=t(26677),C=t(39828),P=t(8713);let _=()=>{let[e,n]=(0,j.useState)(0),[t,a]=(0,j.useState)(15),[_,E]=(0,j.useState)(!1),[A,z]=(0,j.useState)(!1),[F,O]=(0,j.useState)(null),[M,J]=(0,j.useState)([]),[T,W]=(0,j.useState)(null),{isOpen:N,onOpen:Z,onClose:H}=(0,r.q)(),{isOpen:L,onOpen:R,onClose:G}=(0,r.q)(),{isOpen:X,onOpen:q,onClose:U}=(0,r.q)(),{isOpen:Y,onOpen:B,onClose:D}=(0,r.q)(),{address:K,isConnecting:Q,isDisconnected:V}=(0,I.mA)();(0,C.hJ)((0,C.ad)(P.H),"userScores"),(0,C.hJ)((0,C.ad)(P.H),"users");let[$,ee,en]=(0,S.ky)((0,C.JU)((0,C.ad)(P.H),"users",K),{snapshotListenOptions:{includeMetadataChanges:!0}});if(!$){let n=(0,C.JU)((0,C.ad)(P.H),"users",K);(0,C.pl)(n,{wallet:K,coins:e})}console.log("value",null==$?void 0:$.data());let et=(0,l.p)(),[es,ea]=(0,j.useState)({lnwPayload:{loading:!0}}),er=e=>{let n=new Set([...M,...e]),t=Array.from(n);J(t)};return(0,j.useEffect)(()=>(window.XRIFrame.registerXRIFrame("my-iframe"),()=>{window.XRIFrame.deregisterXRIFrame()}),[]),(0,j.useEffect)(()=>{let e=e=>{n(Math.min(10*e,4500))},t=()=>{console.log("GAME STARTED!"),E(!0)};return window.addEventListener("message",n=>{if("https://jackson-default-spotxgames.dev.8thwall.app"==n.origin){switch(n.data.name){case"playerPosition":O({...n.data});break;case"nearbyWayspots":er(n.data.wayspots);break;case"loadingNearbyWayspots":ea({...n.data});break;case"gameStart":t();break;case"coinPoints":e(n.data.value)}return}}),()=>{window.removeEventListener("points",e),window.removeEventListener("gameStart",t),window.removeEventListener("message",null)}},[]),(0,j.useEffect)(()=>{console.log("tracking the game");let n=e=>null!==e&&"IFRAME"===e.tagName,s=document.getElementById("my-iframe"),r=async()=>{let t=(0,C.JU)((0,C.ad)(P.H),"users",K);(0,C.pl)(t,{wallet:K,coins:e+(null==$?void 0:$.data().coins)||0}),et({title:"Collection Complete!",status:"success",isClosable:!0,description:"Nice Job! You earned ".concat(e,"!")}),z(!0),E(!1),setTimeout(()=>{n(s)&&s.contentWindow&&s.contentWindow.postMessage({name:"stopar",value:!0},"https://jackson-default-spotxgames.dev.8thwall.app/sx-axion-sprint-1/")},3500)},l=null;return _&&t>0?l=setInterval(()=>{a(e=>e-1)},1e3):_&&t<1&&(r(),clearInterval(l)),()=>clearInterval(l)},[_,t]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(i.M,{children:(0,s.jsx)(o.xu,{dangerouslySetInnerHTML:{__html:'<iframe\n            id="my-iframe"\n            style="border: 0; width: 75vh; height: 90vh"\n            allow="camera;gyroscope;accelerometer;magnetometer;xr-spatial-tracking;microphone;geolocation;"\n            src="https://jackson-default-spotxgames.dev.8thwall.app/sx-axion-sprint-1/">\n            </iframe>'}})}),(0,s.jsx)(o.xu,{px:3,py:2,boxShadow:"inner",sx:{position:"fixed",bottom:0,left:0,right:0},children:(0,s.jsx)(c.k,{h:16,alignItems:"center",justifyContent:"space-between",children:_?(0,s.jsx)(d.r,{justifyItems:"center",children:(0,s.jsxs)(u.P,{children:["Time Remaining: ",t,(0,s.jsx)("br",{}),"Points: ",e]})}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(h.z,{variant:"outlined",onClick:Z,children:(0,s.jsx)(f.J,{as:g.fp2,sx:{fontSize:"3em"}})}),(0,s.jsx)(h.z,{variant:"outlined",onClick:q,children:(0,s.jsx)(f.J,{as:v.KMp,sx:{fontSize:"3em"}})}),(0,s.jsx)(h.z,{variant:"outlined",onClick:R,children:(0,s.jsx)(f.J,{as:y.Mdg,sx:{fontSize:"3em"}})}),(0,s.jsx)(h.z,{variant:"outlined",onClick:B,children:(0,s.jsx)(f.J,{as:w.m9Q,sx:{fontSize:"3em"}})}),(0,s.jsx)(c.k,{alignItems:"center",children:(0,s.jsx)(k.tn,{})})]})})}),(0,s.jsxs)(x.u_,{isOpen:N,onClose:H,children:[(0,s.jsx)(p.Z,{}),(0,s.jsx)(m.h,{children:(0,s.jsx)(b.Z,{playerPosition:F,loadingNearbyWayspots:null==es?void 0:es.lnwPayload,nearbyWayspots:M})})]}),(0,s.jsxs)(x.u_,{isOpen:X,onClose:U,children:[(0,s.jsx)(p.Z,{}),(0,s.jsx)(m.h,{children:(0,s.jsx)(d.r,{children:(0,s.jsxs)(u.P,{children:[(0,s.jsx)("h2",{children:"Wares For Sale"}),(0,s.jsxs)("span",{children:[(0,s.jsx)(f.J,{as:g.R_H})," ",e]})]})})})]}),(0,s.jsxs)(x.u_,{isOpen:L,onClose:G,children:[(0,s.jsx)(p.Z,{}),(0,s.jsx)(m.h,{children:(0,s.jsxs)(d.r,{children:[(0,s.jsx)(u.P,{children:(0,s.jsx)("h4",{children:"Your Items"})}),(0,s.jsx)(u.P,{children:(0,s.jsx)("h4",{children:"Your Wallet Adddress"})}),(0,s.jsx)(u.P,{children:(0,s.jsx)("h4",{children:"Trading Post Profile"})})]})})]}),(0,s.jsxs)(x.u_,{isOpen:L,onClose:G,children:[(0,s.jsx)(p.Z,{}),(0,s.jsx)(m.h,{children:(0,s.jsx)(d.r,{children:(0,s.jsx)(u.P,{children:(0,s.jsx)("h4",{children:"Scores"})})})})]})]})};var E=t(36979),A=t(295);t(45576),t(45624),t(86094),t(83454);let z=()=>{let{address:e,isConnecting:n,isDisconnected:t}=(0,I.mA)();return n?(0,s.jsx)(E.W,{fluid:!0,mt:8,children:(0,s.jsx)(d.r,{justifyItems:"center",children:(0,s.jsx)(u.P,{children:(0,s.jsx)(A.$,{thickness:"4px",speed:"0.65s",emptyColor:"gray.200",color:"blue.500",size:"xl"})})})}):e?(0,s.jsx)(_,{}):t?(0,s.jsx)(a.Z,{children:(0,s.jsx)(E.W,{mt:5,children:"Connect or create a wallet to get started"})}):void 0};var F=z},8713:function(e,n,t){"use strict";t.d(n,{H:function(){return a}});var s=t(44866);t(88522);let a=s.Z.initializeApp({apiKey:"AIzaSyDZnMYpzx4oVf-_fpb-_YGNQTnggmTevD8",authDomain:"spotx-prod.firebaseapp.com",projectId:"spotx-prod",storageBucket:"spotx-prod.appspot.com",messagingSenderId:"603645477644",appId:"1:603645477644:web:89d6f9a13ab2d36af17f29",measurementId:"G-PBSPGR6LVM"});a.auth();let r=new s.Z.auth.GoogleAuthProvider;r.setCustomParameters({prompt:"select_account"})},89214:function(){},85568:function(){},71156:function(){},52361:function(){},94616:function(){}},function(e){e.O(0,[6158,2634,2016,9278,1228,955,2013,3714,3662,7045,4391,5868,2307,5307,997,9774,2888,179],function(){return e(e.s=45728)}),_N_E=e.O()}]);