(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6118,9464,7812],{1482:function(t,e,n){"use strict";n.d(e,{v:function(){return v}});var r=n(15861),i=n(15671),c=n(43144),o=n(73237),a=n(60136),s=n(82963),u=n(61120),h=n(64687),l=n.n(h),p=n(45624),f=n(77191),d=n.n(f),v=function(t){(0,a.Z)(m,t);var e,n,h,f,v,w=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=(0,u.Z)(m);if(e){var r=(0,u.Z)(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return(0,s.Z)(this,t)});function m(){return(0,i.Z)(this,m),w.apply(this,arguments)}return(0,c.Z)(m,[{key:"init",value:(n=(0,r.Z)(l().mark(function t(e){return l().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.chainConfig||(this.chainConfig=(0,p.h2)(p.EN.SOLANA,1));case 1:case"end":return t.stop()}},t,this)})),function(t){return n.apply(this,arguments)})},{key:"authenticateUser",value:(h=(0,r.Z)(l().mark(function t(){var e,n,r,i,c,o,a,s,u,h;return l().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(!this.provider||this.status!==p.MP.CONNECTED)){t.next=2;break}throw p.RM.notConnectedError();case 2:return n=(e=this.chainConfig).chainNamespace,r=e.chainId,t.next=5,this.provider.request({method:"getAccounts"});case 5:if(!((i=t.sent)&&i.length>0)){t.next=25;break}if(!(c=(0,p.Cb)(i[0],this.name))||(0,p.$E)(c)){t.next=12;break}return t.abrupt("return",{idToken:c});case 12:return o={domain:window.location.origin,uri:window.location.href,address:i[0],chainId:parseInt(r,16),version:"1",nonce:Math.random().toString(36).slice(2),issuedAt:new Date().toISOString()},t.next=15,(0,p.tV)(o,n);case 15:return a=t.sent,s=new TextEncoder().encode(a),t.next=19,this.provider.request({method:"signMessage",params:{message:s,display:"utf8"}});case 19:return u=t.sent,t.next=22,(0,p.rn)(n,d().encode(u),a,this.name,this.sessionTime,this.clientId,this.web3AuthNetwork);case 22:return h=t.sent,(0,p.Fr)(i[0],this.name,h),t.abrupt("return",{idToken:h});case 25:throw p.RM.notConnectedError("Not connected with wallet, Please login/connect first");case 26:case"end":return t.stop()}},t,this)})),function(){return h.apply(this,arguments)})},{key:"disconnectSession",value:(f=(0,r.Z)(l().mark(function t(){var e;return l().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return(0,o.Z)((0,u.Z)(m.prototype),"checkDisconnectionRequirements",this).call(this),t.next=3,this.provider.request({method:"getAccounts"});case 3:(e=t.sent)&&e.length>0&&(0,p.qz)(e[0],this.name);case 5:case"end":return t.stop()}},t,this)})),function(){return f.apply(this,arguments)})},{key:"disconnect",value:(v=(0,r.Z)(l().mark(function t(){return l().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.rehydrated=!1,this.emit(p.n2.DISCONNECTED);case 2:case"end":return t.stop()}},t,this)})),function(){return v.apply(this,arguments)})}]),m}(p.J5)},42848:function(t,e,n){"use strict";n.r(e),n.d(e,{PhantomAdapter:function(){return Z}});var r,i=n(15861),c=n(15671),o=n(43144),a=n(97326),s=n(73237),u=n(60136),h=n(82963),l=n(61120),p=n(4942),f=n(64687),d=n.n(f),v=n(45624),w=n(1482),m=n(44445),y=(r=(0,i.Z)(d().mark(function t(){var e,n,r=arguments;return d().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=r.length>0&&void 0!==r[0]?r[0]:{interval:1e3,count:3},!("undefined"!=typeof window&&null!==(e=window.solana)&&void 0!==e&&e.isPhantom)){t.next=4;break}return t.abrupt("return",window.solana);case 4:return t.next=6,function t(e,n,r){return new Promise(function(c,o){r>0?setTimeout((0,i.Z)(d().mark(function i(){var a;return d().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,e();case 2:(a=i.sent)&&c(a),a||t(e,n,r-1).then(function(t){return c(t),t}).catch(function(t){return o(t)});case 5:case"end":return i.stop()}},i)})),n):c(!1)})}(function(){var t;return null===(t=window.solana)||void 0===t?void 0:t.isPhantom},n.interval,n.count);case 6:if(!t.sent){t.next=9;break}return t.abrupt("return",window.solana);case 9:return t.abrupt("return",null);case 10:case"end":return t.stop()}},t)})),function(){return r.apply(this,arguments)}),Z=function(t){(0,u.Z)(x,t);var e,n,r,f,w,Z,k=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=(0,l.Z)(x);if(e){var r=(0,l.Z)(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return(0,h.Z)(this,t)});function x(){var t;(0,c.Z)(this,x);for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];return t=k.call.apply(k,[this].concat(n)),(0,p.Z)((0,a.Z)(t),"name",v.rW.PHANTOM),(0,p.Z)((0,a.Z)(t),"adapterNamespace",v.yk.SOLANA),(0,p.Z)((0,a.Z)(t),"currentChainNamespace",v.EN.SOLANA),(0,p.Z)((0,a.Z)(t),"type",v.hN.EXTERNAL),(0,p.Z)((0,a.Z)(t),"status",v.MP.NOT_READY),(0,p.Z)((0,a.Z)(t),"_wallet",null),(0,p.Z)((0,a.Z)(t),"phantomProvider",null),(0,p.Z)((0,a.Z)(t),"_onDisconnect",function(){t._wallet&&(t._wallet.off("disconnect",t._onDisconnect),t.rehydrated=!1,t.status=t.status===v.MP.CONNECTED?v.MP.READY:v.MP.NOT_READY,t.emit(v.n2.DISCONNECTED))}),t}return(0,o.Z)(x,[{key:"isWalletConnected",get:function(){var t;return!!(null!==(t=this._wallet)&&void 0!==t&&t.isConnected&&this.status===v.MP.CONNECTED)}},{key:"provider",get:function(){var t;return(null===(t=this.phantomProvider)||void 0===t?void 0:t.provider)||null},set:function(t){throw Error("Not implemented")}},{key:"init",value:(n=(0,i.Z)(d().mark(function t(){var e,n=arguments;return d().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=n.length>0&&void 0!==n[0]?n[0]:{},t.next=3,(0,s.Z)((0,l.Z)(x.prototype),"init",this).call(this,e);case 3:return(0,s.Z)((0,l.Z)(x.prototype),"checkInitializationRequirements",this).call(this),t.next=6,y({interval:500,count:3});case 6:if(this._wallet=t.sent,this._wallet){t.next=9;break}throw v.Ty.notInstalled();case 9:if(this.phantomProvider=new m.PhantomInjectedProvider({config:{chainConfig:this.chainConfig}}),this.status=v.MP.READY,this.emit(v.n2.READY,v.rW.PHANTOM),t.prev=12,v.cM.debug("initializing phantom adapter"),!e.autoConnect){t.next=18;break}return this.rehydrated=!0,t.next=18,this.connect();case 18:t.next=24;break;case 20:t.prev=20,t.t0=t.catch(12),v.cM.error("Failed to connect with cached phantom provider",t.t0),this.emit("ERRORED",t.t0);case 24:case"end":return t.stop()}},t,this,[[12,20]])})),function(){return n.apply(this,arguments)})},{key:"connect",value:(r=(0,i.Z)(d().mark(function t(){var e,n=this;return d().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,(0,s.Z)((0,l.Z)(x.prototype),"checkConnectionRequirements",this).call(this),this.status=v.MP.CONNECTING,this.emit(v.n2.CONNECTING,{adapter:v.rW.PHANTOM}),this._wallet){t.next=6;break}throw v.Ty.notInstalled();case 6:if(this._wallet.isConnected){t.next=23;break}return e=this._wallet._handleDisconnect,t.prev=8,t.next=11,new Promise(function(t,r){var c=function(){var e=(0,i.Z)(d().mark(function e(){return d().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.connectWithProvider(n._wallet);case 2:t(n.provider);case 3:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();if(!n._wallet){r(v.Ty.notInstalled());return}n._wallet.once("connect",c),n._wallet._handleDisconnect=function(){r(v.Ty.windowClosed());for(var t=arguments.length,i=Array(t),c=0;c<t;c++)i[c]=arguments[c];return e.apply(n._wallet,i)},n._wallet.connect().catch(function(t){r(t)})});case 11:t.next=18;break;case 13:if(t.prev=13,t.t0=t.catch(8),!(t.t0 instanceof v.up)){t.next=17;break}throw t.t0;case 17:throw v.RM.connectionError(null===t.t0||void 0===t.t0?void 0:t.t0.message);case 18:return t.prev=18,this._wallet._handleDisconnect=e,t.finish(18);case 21:t.next=25;break;case 23:return t.next=25,this.connectWithProvider(this._wallet);case 25:if(this._wallet.publicKey){t.next=27;break}throw v.RM.connectionError();case 27:return this._wallet.on("disconnect",this._onDisconnect),t.abrupt("return",this.provider);case 31:throw t.prev=31,t.t1=t.catch(0),this.status=v.MP.READY,this.rehydrated=!1,this.emit(v.n2.ERRORED,t.t1),t.t1;case 37:case"end":return t.stop()}},t,this,[[0,31],[8,13,18,21]])})),function(){return r.apply(this,arguments)})},{key:"disconnect",value:(f=(0,i.Z)(d().mark(function t(){var e,n,r=arguments;return d().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=r.length>0&&void 0!==r[0]?r[0]:{cleanup:!1},t.next=3,(0,s.Z)((0,l.Z)(x.prototype),"disconnectSession",this).call(this);case 3:return t.prev=3,t.next=6,null===(n=this._wallet)||void 0===n?void 0:n.disconnect();case 6:return e.cleanup&&(this.status=v.MP.NOT_READY,this.phantomProvider=null,this._wallet=null),t.next=9,(0,s.Z)((0,l.Z)(x.prototype),"disconnect",this).call(this);case 9:t.next=14;break;case 11:t.prev=11,t.t0=t.catch(3),this.emit(v.n2.ERRORED,v.RM.disconnectionError(null===t.t0||void 0===t.t0?void 0:t.t0.message));case 14:case"end":return t.stop()}},t,this,[[3,11]])})),function(){return f.apply(this,arguments)})},{key:"getUserInfo",value:(w=(0,i.Z)(d().mark(function t(){return d().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.isWalletConnected){t.next=2;break}throw v.RM.notConnectedError("Not connected with wallet, Please login/connect first");case 2:return t.abrupt("return",{});case 3:case"end":return t.stop()}},t,this)})),function(){return w.apply(this,arguments)})},{key:"connectWithProvider",value:(Z=(0,i.Z)(d().mark(function t(e){return d().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.phantomProvider){t.next=2;break}throw v.RM.connectionError("No phantom provider");case 2:return t.next=4,this.phantomProvider.setupProvider(e);case 4:return this.status=v.MP.CONNECTED,this.emit(v.n2.CONNECTED,{adapter:v.rW.PHANTOM,reconnected:this.rehydrated}),t.abrupt("return",this.provider);case 7:case"end":return t.stop()}},t,this)})),function(t){return Z.apply(this,arguments)})}]),x}(w.v)},7420:function(){},35139:function(){},78848:function(){}}]);